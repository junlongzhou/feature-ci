import{b as J,l as X,a as ee,n as ye,u as K,e as Ce,d as he,j as ge,g as Ve,o as De,p as be,i as V}from"./VBtn-fYltUM7Y.js";import{p as M,$ as te,m as L,g as U,t as v,h as W,i as t,a0 as ke,b as le,a1 as xe,s as Se,r as p,x as Te,j as z,a2 as Ie,c as Ee,d as pe,I as ze,K as Re,e as N,o as h,k as S,w as l,O as R,L as j,a3 as O,n as f,q as y,N as ae,Q as D,l as d,Z as F,D as H,_ as P,R as we,S as w,y as Ne}from"./index-D3ojRB6d.js";import{u as $,_ as $e,a as Be}from"./StatusChip-Dd-W5F2d.js";import{V as Fe,a as Q,b as Pe}from"./VDialog-C1QuPGpr.js";import{V as k,a as Y,b as I,c as A,d as Ae}from"./VForm-DPioLLmB.js";import{V as je,b as Oe,e as x}from"./VToolbar-CTtrlpKH.js";import{V as Z}from"./VRow-D2VtcfyE.js";import{V as E}from"./VCol-DxMKS-bT.js";import"./components-D9PxTpgW.js";const Me=M({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:te,iconColor:String,lineColor:String,...L(),...J(),...X(),...ee()},"VTimelineDivider"),Le=U()({name:"VTimelineDivider",props:Me(),setup(e,c){let{slots:n}=c;const{sizeClasses:i,sizeStyles:r}=ye(e,"v-timeline-divider__dot"),{backgroundColorStyles:_,backgroundColorClasses:m}=K(v(e,"dotColor")),{roundedClasses:u}=Ce(e,"v-timeline-divider__dot"),{elevationClasses:C}=he(e),{backgroundColorClasses:b,backgroundColorStyles:T}=K(v(e,"lineColor"));return W(()=>t("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[t("div",{class:["v-timeline-divider__before",b.value],style:T.value},null),!e.hideDot&&t("div",{key:"dot",class:["v-timeline-divider__dot",C.value,u.value,i.value],style:r.value},[t("div",{class:["v-timeline-divider__inner-dot",m.value,u.value],style:_.value},[n.default?t(Ve,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):t(ge,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),t("div",{class:["v-timeline-divider__after",b.value],style:T.value},null)])),{}}}),ne=M({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:te,iconColor:String,lineInset:[Number,String],...L(),...ke(),...ee(),...J(),...X(),...le()},"VTimelineItem"),Ue=U()({name:"VTimelineItem",props:ne(),setup(e,c){let{slots:n}=c;const{dimensionStyles:i}=xe(e),r=Se(0),_=p();return Te(_,m=>{var u;m&&(r.value=((u=m.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:u.getBoundingClientRect().width)??0)},{flush:"post"}),W(()=>{var m,u;return t("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":z(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${z(e.lineInset)})`:z(0)},e.style]},[t("div",{class:"v-timeline-item__body",style:i.value},[(m=n.default)==null?void 0:m.call(n)]),t(Le,{ref:_,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&t("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((u=n.opposite)==null?void 0:u.call(n))])])}),{}}}),We=M({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Ie(ne({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...L(),...De(),...le(),...Ee()},"VTimeline"),Ge=U()({name:"VTimeline",props:We(),setup(e,c){let{slots:n}=c;const{themeClasses:i}=pe(e),{densityClasses:r}=be(e),{rtlClasses:_}=ze();Re({VTimelineDivider:{lineColor:v(e,"lineColor")},VTimelineItem:{density:v(e,"density"),dotColor:v(e,"dotColor"),fillDot:v(e,"fillDot"),hideOpposite:v(e,"hideOpposite"),iconColor:v(e,"iconColor"),lineColor:v(e,"lineColor"),lineInset:v(e,"lineInset"),size:v(e,"size")}});const m=N(()=>{const C=e.side?e.side:e.density!=="default"?"end":null;return C&&`v-timeline--side-${C}`}),u=N(()=>{const C=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return C;case"start":return C[0];case"end":return C[1];default:return null}});return W(()=>t(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,u.value,{"v-timeline--inset-line":!!e.lineInset},i.value,r.value,m.value,_.value,e.class],style:[{"--v-timeline-line-thickness":z(e.lineThickness)},e.style]},n)),{}}}),qe={__name:"LifecycleTimeline",props:["items"],setup(e){const c=e;return(n,i)=>(h(),S(Ge,{direction:"horizontal",size:"small","truncate-line":"both",class:"mb-4",side:"end"},{default:l(()=>[(h(!0),R(j,null,O(c.items,r=>(h(),S(Ue,{"dot-color":r.color,icon:"mdi-check-bold","fill-dot":""},{default:l(()=>[f(y(r.text),1)]),_:2},1032,["dot-color"]))),256))]),_:1}))}},Ke={class:"font-italic text-body-2 text-disabled mr-3"},He=d("span",{class:"text-h5"},"Edit feature",-1),Qe=["href"],Ye=d("thead",null,[d("tr",null,[d("th",null,"Repository Name"),d("th",null,"Source Branch"),d("th",null,"Main Branch"),d("th",null,"Properties")])],-1),Ze=["href"],Je=d("td",null,null,-1),Xe={__name:"FeatureDetail",props:["feature"],setup(e){const c=p(!1),n=p(!1),i=e,r=p(!1),{alertMessage:_,alertType:m,currentFeature:u,defaultFeature:C,user:b}=ae($()),{updateFeature:T,deleteFeature:ie,approveFeature:oe,isFeatureEditable:se}=$(),B=N(()=>{var s;return se((s=i.feature)==null?void 0:s.status)}),re=N(()=>{var s,a;return((s=i.feature)==null?void 0:s.status)==="MERGED"?[{text:"NEW",color:"green"},{text:"WIP",color:"green"},{text:"ACTIVE",color:"green"},{text:"MERGED",color:"green"}]:((a=i.feature)==null?void 0:a.status)==="ABANDONED"?[{text:"NEW",color:"green"},{text:"ABANDONED",color:"green"}]:[{text:"NEW",color:"green"},{text:"WIP",color:"grey"},{text:"ACTIVE",color:"grey"},{text:"MERGED",color:"grey"}]});async function ue(){await ie(),q(),r.value=!0,w.push("/")}function G(){c.value=!1}function q(){n.value=!1}async function de(){u.value.properties.forEach(s=>{Array.isArray(s.value)&&(s.value=s.value.join(","))}),u.value.changes.forEach(s=>{s.properties.forEach(a=>{Array.isArray(a.value)&&(a.value=a.value.join(","))})}),await T(),G(),r.value=!0}async function ce(){await oe(),r.value=!0}function me(s){let a=s.split("_");for(var g=0;g<a.length;g++)a[g]=a[g].charAt(0).toUpperCase()+a[g].substring(1);return a.join(" ")}function fe(s){const a=new Date(s);return isNaN(a)?s:`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()} ${a.getHours()}:${a.getMinutes()}:${a.getSeconds()}`}return(s,a)=>{const g=$e,ve=Be,_e=qe;return h(),S(Ae,{fluid:""},{default:l(()=>[t(Fe,{type:D(m),density:"compact",theme:"dark",text:D(_),modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),elevation:"3",closable:""},null,8,["type","text","modelValue"]),t(k,{elevation:"3"},{default:l(()=>[t(je,null,{prepend:l(()=>[t(g,{status:i.feature.status},null,8,["status"])]),default:l(()=>[t(Oe,null,{default:l(()=>[f(y(i.feature.name),1)]),_:1}),t(x),d("p",Ke," Last updated by "+y(i.feature.last_update_author)+" at "+y(fe(i.feature.last_update_date)),1),t(Q,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=o=>c.value=o),"max-width":"900px"},{activator:l(({props:o})=>[F(t(V,H({icon:"mdi-pencil"},o,{color:"primary",variant:"text"}),null,16),[[P,B.value&&D(b).token]])]),default:l(()=>[t(k,null,{default:l(()=>[t(Y,null,{default:l(()=>[He]),_:1}),t(I,null,{default:l(()=>[t(ve,{modelValue:D(u),"onUpdate:modelValue":a[1]||(a[1]=o=>we(u)?u.value=o:null)},null,8,["modelValue"])]),_:1}),t(A,null,{default:l(()=>[t(x),t(V,{color:"primary",variant:"elevated",onClick:G},{default:l(()=>[f(" Cancel ")]),_:1}),t(V,{color:"primary",variant:"elevated",onClick:de},{default:l(()=>[f(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Q,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=o=>n.value=o),"max-width":"500px"},{activator:l(({props:o})=>[F(t(V,H({icon:"mdi-delete"},o,{color:"primary",variant:"text"}),null,16),[[P,B.value&&D(b).token]])]),default:l(()=>[t(k,null,{default:l(()=>[t(Y,{class:"text-h5"},{default:l(()=>[f("Are you sure you want to delete this item?")]),_:1}),t(A,null,{default:l(()=>[t(x),t(V,{color:"blue-darken-1",variant:"text",onClick:q},{default:l(()=>[f("Cancel")]),_:1}),t(V,{color:"blue-darken-1",variant:"text",onClick:ue},{default:l(()=>[f("OK")]),_:1}),t(x)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(I,null,{default:l(()=>[t(_e,{items:re.value},null,8,["items"]),t(k,{elevation:"3"},{default:l(()=>[t(I,null,{default:l(()=>[t(Z,{dense:""},{default:l(()=>[t(E,{cols:"5",class:"font-weight-black text-body-2"},{default:l(()=>[f("Description:")]),_:1}),t(E,{class:"text-body-2"},{default:l(()=>[d("a",{href:i.feature.change_json,target:"_blank"},y(i.feature.description),9,Qe)]),_:1})]),_:1}),(h(!0),R(j,null,O(i.feature.properties,o=>(h(),S(Z,{dense:""},{default:l(()=>[t(E,{cols:"5",class:"font-weight-black text-body-2"},{default:l(()=>[f(y(me(o.name))+":",1)]),_:2},1024),t(E,{class:"text-body-2"},{default:l(()=>[f(y(o.value),1)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),t(k,{elevation:"3",class:"mt-4"},{default:l(()=>[t(I,null,{default:l(()=>[t(Pe,{density:"compact"},{default:l(()=>[Ye,d("tbody",null,[(h(!0),R(j,null,O(i.feature.changes,o=>(h(),R("tr",null,[d("td",null,[d("a",{href:o.repository,target:"blank"},y(o.display_name),9,Ze)]),d("td",null,y(o.source_branch),1),d("td",null,y(o.target_branch),1),Je]))),256))])]),_:1})]),_:1})]),_:1})]),_:1}),t(A,null,{default:l(()=>[t(x),F(t(V,{color:"primary",variant:"elevated",onClick:ce},{default:l(()=>[f(" Approve ")]),_:1},512),[[P,B.value&&D(b).token]])]),_:1})]),_:1})]),_:1})}}},ut={__name:"[id]",setup(e){const{currentFeature:c}=ae($()),{getFeature:n}=$();return Ne(async()=>{w.currentRoute&&w.currentRoute.value.params.id&&await n(w.currentRoute.value.params.id)}),(i,r)=>{const _=Xe;return h(),S(_,{feature:D(c)},null,8,["feature"])}}};export{ut as default};
