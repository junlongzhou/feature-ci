import{ab as j,ac as T,y as _,o as r,O as k,a3 as z,L as b,k as g,am as $,ah as U,N as M,r as o}from"./index-D3ojRB6d.js";import{e as O}from"./VForm-DPioLLmB.js";import{j as x}from"./VDialog-C1QuPGpr.js";import{h as N}from"./VBtn-fYltUM7Y.js";const E={__name:"PropertyForm",props:j({density:{type:String,default:"default"},spaceClass:{type:String,default:""},mode:{type:String,default:"default"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const d=T(t,"modelValue"),l=t;return _(()=>{d.value&&d.value.forEach(n=>{n.style.widget==="select_multiple"&&(n.value=n.value.split(","))})}),(n,c)=>(r(!0),k(b,null,z(d.value,(e,m)=>(r(),k(b,null,[e.style.widget==="text"?(r(),g(O,{density:l.density,class:$([t.spaceClass,e.style.hidden&&l.mode==="default"?"d-none":""]),modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,key:m,label:e.name,variant:"outlined",readonly:e.style.read_only},null,8,["density","class","modelValue","onUpdate:modelValue","label","readonly"])):(r(),g(x,{key:1,density:l.density,class:$([t.spaceClass,e.style.hidden&&l.mode==="default"?"d-none":""]),modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,items:e.style.values.split(","),label:e.name,variant:"outlined",multiple:e.style.widget==="select_multiple","item-title":"","item-value":"value",readonly:e.style.read_only&&l.mode==="default",chips:""},null,8,["density","class","modelValue","onUpdate:modelValue","items","label","multiple","readonly"]))],64))),256))}},J=U("components",()=>{const{user:t}=M(N()),d=o([]),l=o(0),n=o(""),c="/api/v1/components/",e=o({repository:"",build:0,properties:[]}),m=o({repository:"",build:0,properties:[]}),s=o(""),u=o("success"),v=o(10),p=o(1),f=o(0);async function C(){const a=n.value?`&repository__contains=${n.value}`:"",i=l.value?`&build=${l.value}`:"",y=await fetch(`${c}?page=${p.value}&page_size=${v.value}${a}${i}`);if(y.ok){const h=await y.json();d.value=h.results,f.value=h.count}}async function V(){if(t.value.token){const a=await fetch(c,{method:"post",body:JSON.stringify(e.value),headers:{Authorization:`Token ${t.value.token}`,"Content-Type":"application/json"}});if(!a.ok)u.value="error",s.value=a.body;else{const i=await a.json();u.value="success",s.value=`Create successfully for component: ${i.repository}`,Object.assign(e.value,i)}}}async function S(){if(t.value.token){const a=await fetch(`${c}${e.value.id}/`,{method:"put",body:JSON.stringify(e.value),headers:{Authorization:`Token ${t.value.token}`,"Content-Type":"application/json"}});if(!a.ok)u.value="error",s.value=a.body;else{const i=await a.json();Object.assign(e.value,i),u.value="success",s.value=`Updated successfully for component: ${i.repository}`}}}async function w(){if(t.value.token){const a=await fetch(`${c}${e.value.id}/`,{method:"delete",headers:{Authorization:`Token ${t.value.token}`}});a.ok?(u.value="success",s.value="Removed successfully"):(u.value="error",s.value=a.body)}}return{components:d,currentComponent:e,defaultComponent:m,alertType:u,alertMessage:s,user:t,build:l,query:n,pageNumber:p,pageSize:v,total:f,getComponents:C,createComponent:V,updateComponent:S,deleteComponent:w}});export{E as _,J as u};
